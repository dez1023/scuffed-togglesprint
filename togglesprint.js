if (window.ScuffedToggleSprintActive) {alert("ScuffedToggleSprint already active"); throw new Error();} window.ScuffedToggleSprintActive = true; alert("Toggling this will cause the R key to type twice, make sure to untoggle before you chat.\n\nClick the button or press 0 to toggle.\n\nMade by gringoile/dez1023.",) let toggled = false let downReq const style = ` <style id="ScuffedToggleSprintCSS"> .STSButton {all: unset; background: rgba(0,0,0,0.5); position: fixed; z-index: 100; right: 10px; bottom: 10px; padding: 5px 10px; border-radius: 5px; backdrop-filter: blur(10px); font-family: Helvetica, sans-serif; font-size: 12px; cursor: pointer; transition: 0.25s; color: white; font-weight: 900; outline: 0 solid rgba(0,0,0,0)} .STSButton:hover {box-shadow: inset 0 0 0 100px rgba(0,0,0,0.25); transform: scale(1.025); outline: 1px solid rgba(255,255,255,0.5);} .STSButton:active {box-shadow: inset 0 0 0 100px rgba(0,0,0,0.75); transform: scale(0.99); transition: 0s} #STSclosebutton:hover {background: #ff6464} </style>` document.head.insertAdjacentHTML('beforeend', style); function createButton() { const btn = document.createElement("button") btn.className = "STSButton" btn.innerHTML = "" document.body.appendChild(btn) return btn } let togglebutton = createButton() let closebutton = createButton() togglebutton.innerHTML = "Scuffed ToggleSprint: OFF" togglebutton.style.right = "40px" closebutton.innerHTML = "X" closebutton.style.padding = "5px 8px" closebutton.id = "STSclosebutton" const keyConfig = { key: "r", code: "r", which: 82, keyCode: 82, charCode: 82, bubbles: true, cancelable: false, } const downEvent = new KeyboardEvent("keydown", keyConfig) const upEvent = new KeyboardEvent("keyup", keyConfig) function toggleSprint() { toggled = !toggled if (toggled) { togglebutton.innerHTML = "Scuffed ToggleSprint: ON" document.body.dispatchEvent(downEvent) } else { togglebutton.innerHTML = "Scuffed ToggleSprint: OFF" document.body.dispatchEvent(upEvent) } } function toggleKey(event) { if (event.keyCode == 48 && event.isTrusted) { togglebutton.click() //toggleSprint() } } function resetDispatch(event) { if (event.keyCode == 82 && event.isTrusted && toggled) { setTimeout(function () { document.body.dispatchEvent(downEvent) }, 10) } } document.body.addEventListener("keydown", toggleKey) document.body.addEventListener("keyup", resetDispatch) togglebutton.addEventListener("click", toggleSprint) closebutton.addEventListener("click", function () { document.body.dispatchEvent(upEvent) togglebutton.remove() closebutton.remove() document.body.removeEventListener("keyup", resetDispatch) window.ScuffedToggleSprintActive = false; togglebutton = null closebutton = null document.getElementById("ScuffedToggleSprintCSS").remove() })
